{"ast":null,"code":"import _toConsumableArray from \"C:/Users/DimaP/Desktop/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/React_handmade/mypizza/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport { useRef } from 'react';\nimport useUpdateEffect from '../../../useUpdateEffect';\n// support refreshDeps & ready\nvar useAutoRunPlugin = function useAutoRunPlugin(fetchInstance, _ref) {\n  var manual = _ref.manual,\n    _ref$ready = _ref.ready,\n    ready = _ref$ready === void 0 ? true : _ref$ready,\n    _ref$defaultParams = _ref.defaultParams,\n    defaultParams = _ref$defaultParams === void 0 ? [] : _ref$defaultParams,\n    _ref$refreshDeps = _ref.refreshDeps,\n    refreshDeps = _ref$refreshDeps === void 0 ? [] : _ref$refreshDeps,\n    refreshDepsAction = _ref.refreshDepsAction;\n  var hasAutoRun = useRef(false);\n  hasAutoRun.current = false;\n  useUpdateEffect(function () {\n    if (!manual && ready) {\n      hasAutoRun.current = true;\n      fetchInstance.run.apply(fetchInstance, _toConsumableArray(defaultParams));\n    }\n  }, [ready]);\n  useUpdateEffect(function () {\n    if (hasAutoRun.current) {\n      return;\n    }\n    if (!manual) {\n      hasAutoRun.current = true;\n      if (refreshDepsAction) {\n        refreshDepsAction();\n      } else {\n        fetchInstance.refresh();\n      }\n    }\n  }, _toConsumableArray(refreshDeps));\n  return {\n    onBefore: function onBefore() {\n      if (!ready) {\n        return {\n          stopNow: true\n        };\n      }\n    }\n  };\n};\nuseAutoRunPlugin.onInit = function (_ref2) {\n  var _ref2$ready = _ref2.ready,\n    ready = _ref2$ready === void 0 ? true : _ref2$ready,\n    manual = _ref2.manual;\n  return {\n    loading: !manual && ready\n  };\n};\nexport default useAutoRunPlugin;","map":{"version":3,"names":["useRef","useUpdateEffect","useAutoRunPlugin","fetchInstance","manual","ready","defaultParams","refreshDeps","refreshDepsAction","hasAutoRun","current","run","refresh","onBefore","stopNow","onInit","loading"],"sources":["C:/Users/DimaP/Desktop/Проекты/React_handmade/mypizza/node_modules/ahooks/es/useRequest/src/plugins/useAutoRunPlugin.js"],"sourcesContent":["import { useRef } from 'react';\nimport useUpdateEffect from '../../../useUpdateEffect';\n// support refreshDeps & ready\nconst useAutoRunPlugin = (fetchInstance, {\n  manual,\n  ready = true,\n  defaultParams = [],\n  refreshDeps = [],\n  refreshDepsAction\n}) => {\n  const hasAutoRun = useRef(false);\n  hasAutoRun.current = false;\n  useUpdateEffect(() => {\n    if (!manual && ready) {\n      hasAutoRun.current = true;\n      fetchInstance.run(...defaultParams);\n    }\n  }, [ready]);\n  useUpdateEffect(() => {\n    if (hasAutoRun.current) {\n      return;\n    }\n    if (!manual) {\n      hasAutoRun.current = true;\n      if (refreshDepsAction) {\n        refreshDepsAction();\n      } else {\n        fetchInstance.refresh();\n      }\n    }\n  }, [...refreshDeps]);\n  return {\n    onBefore: () => {\n      if (!ready) {\n        return {\n          stopNow: true\n        };\n      }\n    }\n  };\n};\nuseAutoRunPlugin.onInit = ({\n  ready = true,\n  manual\n}) => {\n  return {\n    loading: !manual && ready\n  };\n};\nexport default useAutoRunPlugin;"],"mappings":";AAAA,SAASA,MAAM,QAAQ,OAAO;AAC9B,OAAOC,eAAe,MAAM,0BAA0B;AACtD;AACA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgB,CAAIC,aAAa,QAMjC;EAAA,IALJC,MAAM,QAANA,MAAM;IAAA,kBACNC,KAAK;IAALA,KAAK,2BAAG,IAAI;IAAA,0BACZC,aAAa;IAAbA,aAAa,mCAAG,EAAE;IAAA,wBAClBC,WAAW;IAAXA,WAAW,iCAAG,EAAE;IAChBC,iBAAiB,QAAjBA,iBAAiB;EAEjB,IAAMC,UAAU,GAAGT,MAAM,CAAC,KAAK,CAAC;EAChCS,UAAU,CAACC,OAAO,GAAG,KAAK;EAC1BT,eAAe,CAAC,YAAM;IACpB,IAAI,CAACG,MAAM,IAAIC,KAAK,EAAE;MACpBI,UAAU,CAACC,OAAO,GAAG,IAAI;MACzBP,aAAa,CAACQ,GAAG,OAAjBR,aAAa,qBAAQG,aAAa,EAAC;IACrC;EACF,CAAC,EAAE,CAACD,KAAK,CAAC,CAAC;EACXJ,eAAe,CAAC,YAAM;IACpB,IAAIQ,UAAU,CAACC,OAAO,EAAE;MACtB;IACF;IACA,IAAI,CAACN,MAAM,EAAE;MACXK,UAAU,CAACC,OAAO,GAAG,IAAI;MACzB,IAAIF,iBAAiB,EAAE;QACrBA,iBAAiB,EAAE;MACrB,CAAC,MAAM;QACLL,aAAa,CAACS,OAAO,EAAE;MACzB;IACF;EACF,CAAC,qBAAML,WAAW,EAAE;EACpB,OAAO;IACLM,QAAQ,EAAE,oBAAM;MACd,IAAI,CAACR,KAAK,EAAE;QACV,OAAO;UACLS,OAAO,EAAE;QACX,CAAC;MACH;IACF;EACF,CAAC;AACH,CAAC;AACDZ,gBAAgB,CAACa,MAAM,GAAG,iBAGpB;EAAA,wBAFJV,KAAK;IAALA,KAAK,4BAAG,IAAI;IACZD,MAAM,SAANA,MAAM;EAEN,OAAO;IACLY,OAAO,EAAE,CAACZ,MAAM,IAAIC;EACtB,CAAC;AACH,CAAC;AACD,eAAeH,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}