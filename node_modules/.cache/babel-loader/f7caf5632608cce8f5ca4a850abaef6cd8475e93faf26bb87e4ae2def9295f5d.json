{"ast":null,"code":"import _toConsumableArray from \"C:/Users/DimaP/Desktop/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/React_handmade/mypizza/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _toArray from \"C:/Users/DimaP/Desktop/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/React_handmade/mypizza/node_modules/@babel/runtime/helpers/esm/toArray.js\";\nimport { __rest } from \"tslib\";\nimport { useMemo } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useRequest from '../useRequest';\nvar usePagination = function usePagination(service) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _a;\n  var _options$defaultPageS = options.defaultPageSize,\n    defaultPageSize = _options$defaultPageS === void 0 ? 10 : _options$defaultPageS,\n    _options$defaultCurre = options.defaultCurrent,\n    defaultCurrent = _options$defaultCurre === void 0 ? 1 : _options$defaultCurre,\n    rest = __rest(options, [\"defaultPageSize\", \"defaultCurrent\"]);\n  var result = useRequest(service, Object.assign({\n    defaultParams: [{\n      current: defaultCurrent,\n      pageSize: defaultPageSize\n    }],\n    refreshDepsAction: function refreshDepsAction() {\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      changeCurrent(1);\n    }\n  }, rest));\n  var _ref = result.params[0] || {},\n    _ref$current = _ref.current,\n    current = _ref$current === void 0 ? 1 : _ref$current,\n    _ref$pageSize = _ref.pageSize,\n    pageSize = _ref$pageSize === void 0 ? defaultPageSize : _ref$pageSize;\n  var total = ((_a = result.data) === null || _a === void 0 ? void 0 : _a.total) || 0;\n  var totalPage = useMemo(function () {\n    return Math.ceil(total / pageSize);\n  }, [pageSize, total]);\n  var onChange = function onChange(c, p) {\n    var toCurrent = c <= 0 ? 1 : c;\n    var toPageSize = p <= 0 ? 1 : p;\n    var tempTotalPage = Math.ceil(total / toPageSize);\n    if (toCurrent > tempTotalPage) {\n      toCurrent = Math.max(1, tempTotalPage);\n    }\n    var _ref2 = result.params || [],\n      _ref3 = _toArray(_ref2),\n      _ref3$ = _ref3[0],\n      oldPaginationParams = _ref3$ === void 0 ? {} : _ref3$,\n      restParams = _ref3.slice(1);\n    result.run.apply(result, [Object.assign(Object.assign({}, oldPaginationParams), {\n      current: toCurrent,\n      pageSize: toPageSize\n    })].concat(_toConsumableArray(restParams)));\n  };\n  var changeCurrent = function changeCurrent(c) {\n    onChange(c, pageSize);\n  };\n  var changePageSize = function changePageSize(p) {\n    onChange(current, p);\n  };\n  return Object.assign(Object.assign({}, result), {\n    pagination: {\n      current: current,\n      pageSize: pageSize,\n      total: total,\n      totalPage: totalPage,\n      onChange: useMemoizedFn(onChange),\n      changeCurrent: useMemoizedFn(changeCurrent),\n      changePageSize: useMemoizedFn(changePageSize)\n    }\n  });\n};\nexport default usePagination;","map":{"version":3,"names":["__rest","useMemo","useMemoizedFn","useRequest","usePagination","service","options","_a","defaultPageSize","defaultCurrent","rest","result","Object","assign","defaultParams","current","pageSize","refreshDepsAction","changeCurrent","params","total","data","totalPage","Math","ceil","onChange","c","p","toCurrent","toPageSize","tempTotalPage","max","oldPaginationParams","restParams","run","changePageSize","pagination"],"sources":["C:/Users/DimaP/Desktop/Проекты/React_handmade/mypizza/node_modules/ahooks/es/usePagination/index.js"],"sourcesContent":["import { __rest } from \"tslib\";\nimport { useMemo } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useRequest from '../useRequest';\nconst usePagination = (service, options = {}) => {\n  var _a;\n  const {\n      defaultPageSize = 10,\n      defaultCurrent = 1\n    } = options,\n    rest = __rest(options, [\"defaultPageSize\", \"defaultCurrent\"]);\n  const result = useRequest(service, Object.assign({\n    defaultParams: [{\n      current: defaultCurrent,\n      pageSize: defaultPageSize\n    }],\n    refreshDepsAction: () => {\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      changeCurrent(1);\n    }\n  }, rest));\n  const {\n    current = 1,\n    pageSize = defaultPageSize\n  } = result.params[0] || {};\n  const total = ((_a = result.data) === null || _a === void 0 ? void 0 : _a.total) || 0;\n  const totalPage = useMemo(() => Math.ceil(total / pageSize), [pageSize, total]);\n  const onChange = (c, p) => {\n    let toCurrent = c <= 0 ? 1 : c;\n    const toPageSize = p <= 0 ? 1 : p;\n    const tempTotalPage = Math.ceil(total / toPageSize);\n    if (toCurrent > tempTotalPage) {\n      toCurrent = Math.max(1, tempTotalPage);\n    }\n    const [oldPaginationParams = {}, ...restParams] = result.params || [];\n    result.run(Object.assign(Object.assign({}, oldPaginationParams), {\n      current: toCurrent,\n      pageSize: toPageSize\n    }), ...restParams);\n  };\n  const changeCurrent = c => {\n    onChange(c, pageSize);\n  };\n  const changePageSize = p => {\n    onChange(current, p);\n  };\n  return Object.assign(Object.assign({}, result), {\n    pagination: {\n      current,\n      pageSize,\n      total,\n      totalPage,\n      onChange: useMemoizedFn(onChange),\n      changeCurrent: useMemoizedFn(changeCurrent),\n      changePageSize: useMemoizedFn(changePageSize)\n    }\n  });\n};\nexport default usePagination;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}