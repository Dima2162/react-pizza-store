{"ast":null,"code":"import _objectSpread from\"C:/Users/DimaP/Desktop/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/React_handmade/mypizza/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice}from'@reduxjs/toolkit';import{calcTotalPrice}from'../../utils/calcTotalPrice';import{getCartFromLS}from'../../utils/getCartFromLS';var _getCartFromLS=getCartFromLS(),items=_getCartFromLS.items,totalPrice=_getCartFromLS.totalPrice;var initialState={totalPrice:totalPrice,items:items};var cartSlice=createSlice({name:'cart',initialState:initialState,reducers:{addItem:function addItem(state,action){var findItem=state.items.find(function(obj){return obj.id===action.payload.id;});if(findItem){findItem.count++;}else{state.items.push(_objectSpread(_objectSpread({},action.payload),{},{count:1}));}state.totalPrice=calcTotalPrice(state.items);},minusItem:function minusItem(state,action){var findItem=state.items.find(function(obj){return obj.id===action.payload;});// state.items = state.items.filter((obj) => obj.count !== 0);\nif(findItem){findItem.count--;}},removeItem:function removeItem(state,action){state.items=state.items.filter(function(obj){return obj.id===action.payload;});},clearItem:function clearItem(state){state.items=[];state.totalPrice=0;}}});export var selectCart=function selectCart(state){return state.cartSlice;};export var selectCartItem=function selectCartItem(id){return function(state){return state.cartSlice.items.find(function(obj){return obj.id===id;});};};var _cartSlice$actions=cartSlice.actions,addItem=_cartSlice$actions.addItem,removeItem=_cartSlice$actions.removeItem,clearItem=_cartSlice$actions.clearItem,minusItem=_cartSlice$actions.minusItem;export{addItem,removeItem,clearItem,minusItem};export default cartSlice.reducer;","map":{"version":3,"names":["createSlice","calcTotalPrice","getCartFromLS","items","totalPrice","initialState","cartSlice","name","reducers","addItem","state","action","findItem","find","obj","id","payload","count","push","minusItem","removeItem","filter","clearItem","selectCart","selectCartItem","actions","reducer"],"sources":["C:/Users/DimaP/Desktop/Проекты/React_handmade/mypizza/src/redux/slice/cartSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { calcTotalPrice } from '../../utils/calcTotalPrice';\r\nimport { getCartFromLS } from '../../utils/getCartFromLS';\r\nimport { RootState } from '../store';\r\n\r\nexport type CartItem = {\r\n\tid:string;\r\n\ttitle:string;\r\n\tprice:number;\r\n\timageUrl:string;\r\n\ttype:string;\r\n\tsize:number;\r\n\tcount:number;\r\n};\r\ninterface CartSliceState {\r\n\ttotalPrice: number;\r\n\titems: CartItem[];\r\n}\r\nconst {items, totalPrice} = getCartFromLS();\r\n\r\nconst initialState: CartSliceState = {\r\n\ttotalPrice,\r\n\titems, \r\n};\r\n\r\nconst cartSlice = createSlice({\r\n\tname: 'cart',\r\n\tinitialState,\r\n\treducers: {\r\n\t\taddItem(state, action:PayloadAction<CartItem>) {\r\n\t\t\tconst findItem = state.items.find((obj) => obj.id === action.payload.id);\r\n\r\n\t\t\tif (findItem) {\r\n\t\t\t\tfindItem.count++;\r\n\t\t\t} else {\r\n\t\t\t\tstate.items.push({\r\n\t\t\t\t\t...action.payload,\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tstate.totalPrice = calcTotalPrice(state.items)\r\n\t\t},\r\n    minusItem(state, action:PayloadAction<string>){\r\n\t\t\tconst findItem = state.items.find((obj) => obj.id === action.payload);\r\n\t\t\t// state.items = state.items.filter((obj) => obj.count !== 0);\r\n      if (findItem) {\r\n\t\t\t\tfindItem.count--;\r\n\t\t\t}\r\n    },\r\n\r\n\t\tremoveItem(state, action:PayloadAction<string>) {\r\n\t\t\tstate.items = state.items.filter((obj) => obj.id === action.payload);\r\n\t\t},\r\n\t\tclearItem(state) {\r\n\t\t\tstate.items = [];\r\n      state.totalPrice = 0;\r\n\t\t},\r\n\t},\r\n});\r\nexport const selectCart =(state: RootState) => state.cartSlice;\r\nexport const selectCartItem = (id:string) => (state: RootState) => state.cartSlice.items.find((obj) => obj.id === id)\r\nexport const { addItem, removeItem, clearItem, minusItem } = cartSlice.actions;\r\nexport default cartSlice.reducer;\r\n"],"mappings":"6KAAA,OAASA,WAAW,KAAuB,kBAAkB,CAC7D,OAASC,cAAc,KAAQ,4BAA4B,CAC3D,OAASC,aAAa,KAAQ,2BAA2B,CAgBzD,mBAA4BA,aAAa,EAAE,CAApCC,KAAK,gBAALA,KAAK,CAAEC,UAAU,gBAAVA,UAAU,CAExB,GAAMC,aAA4B,CAAG,CACpCD,UAAU,CAAVA,UAAU,CACVD,KAAK,CAALA,KACD,CAAC,CAED,GAAMG,UAAS,CAAGN,WAAW,CAAC,CAC7BO,IAAI,CAAE,MAAM,CACZF,YAAY,CAAZA,YAAY,CACZG,QAAQ,CAAE,CACTC,OAAO,kBAACC,KAAK,CAAEC,MAA8B,CAAE,CAC9C,GAAMC,SAAQ,CAAGF,KAAK,CAACP,KAAK,CAACU,IAAI,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACC,EAAE,GAAKJ,MAAM,CAACK,OAAO,CAACD,EAAE,GAAC,CAExE,GAAIH,QAAQ,CAAE,CACbA,QAAQ,CAACK,KAAK,EAAE,CACjB,CAAC,IAAM,CACNP,KAAK,CAACP,KAAK,CAACe,IAAI,gCACZP,MAAM,CAACK,OAAO,MACjBC,KAAK,CAAE,CAAC,GACP,CACH,CACAP,KAAK,CAACN,UAAU,CAAGH,cAAc,CAACS,KAAK,CAACP,KAAK,CAAC,CAC/C,CAAC,CACCgB,SAAS,oBAACT,KAAK,CAAEC,MAA4B,CAAC,CAC/C,GAAMC,SAAQ,CAAGF,KAAK,CAACP,KAAK,CAACU,IAAI,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACC,EAAE,GAAKJ,MAAM,CAACK,OAAO,GAAC,CACrE;AACG,GAAIJ,QAAQ,CAAE,CAChBA,QAAQ,CAACK,KAAK,EAAE,CACjB,CACC,CAAC,CAEHG,UAAU,qBAACV,KAAK,CAAEC,MAA4B,CAAE,CAC/CD,KAAK,CAACP,KAAK,CAAGO,KAAK,CAACP,KAAK,CAACkB,MAAM,CAAC,SAACP,GAAG,QAAKA,IAAG,CAACC,EAAE,GAAKJ,MAAM,CAACK,OAAO,GAAC,CACrE,CAAC,CACDM,SAAS,oBAACZ,KAAK,CAAE,CAChBA,KAAK,CAACP,KAAK,CAAG,EAAE,CACbO,KAAK,CAACN,UAAU,CAAG,CAAC,CACxB,CACD,CACD,CAAC,CAAC,CACF,MAAO,IAAMmB,WAAU,CAAE,QAAZA,WAAU,CAAGb,KAAgB,QAAKA,MAAK,CAACJ,SAAS,GAC9D,MAAO,IAAMkB,eAAc,CAAG,QAAjBA,eAAc,CAAIT,EAAS,QAAK,UAACL,KAAgB,QAAKA,MAAK,CAACJ,SAAS,CAACH,KAAK,CAACU,IAAI,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACC,EAAE,GAAKA,EAAE,GAAC,KAC9G,uBAAsDT,SAAS,CAACmB,OAAO,CAA/DhB,OAAO,oBAAPA,OAAO,CAAEW,UAAU,oBAAVA,UAAU,CAAEE,SAAS,oBAATA,SAAS,CAAEH,SAAS,oBAATA,SAAS,CAAuB,+CAC/E,cAAeb,UAAS,CAACoB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}