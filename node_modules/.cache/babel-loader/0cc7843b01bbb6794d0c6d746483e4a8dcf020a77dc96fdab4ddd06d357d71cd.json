{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DimaP/Desktop/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/React_handmade/mypizza/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/DimaP/Desktop/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/React_handmade/mypizza/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import axios from'axios';export var fetchPizzas=createAsyncThunk('pizza/fetchPizzasStatus',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(params){var sortBy,order,category,search,pageCount,_yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:sortBy=params.sortBy,order=params.order,category=params.category,search=params.search,pageCount=params.pageCount;_context.next=3;return axios.get(\"http://localhost:3002/pizzas?_page=\".concat(pageCount,\"&_limit=4\").concat(category,\"&_sort=\").concat(sortBy,\"&_order=\").concat(order).concat(search));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;return _context.abrupt(\"return\",data);case 6:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var Status;(function(Status){Status[\"LOADING\"]=\"loading\";Status[\"SUCCESS\"]=\"success\";Status[\"ERROR\"]=\"error\";})(Status||(Status={}));var initialState={items:[],status:Status.LOADING};var pizzaSlice=createSlice({name:'pizza',initialState:initialState,reducers:{setItems:function setItems(state,action){state.items=action.payload;}},extraReducers:function extraReducers(builder){builder.addCase(fetchPizzas.pending,function(state,action){state.items=[];state.status=Status.LOADING;});builder.addCase(fetchPizzas.fulfilled,function(state,action){state.items=action.payload;state.status=Status.SUCCESS;});builder.addCase(fetchPizzas.rejected,function(state,action){state.items=[];state.status=Status.ERROR;});}});export var selectPizzaData=function selectPizzaData(state){return state.pizzaSlice;};var setItems=pizzaSlice.actions.setItems;export{setItems};export default pizzaSlice.reducer;// extraReducers: {\n// \t[fetchPizzas.pending]:(state)=>{\n// \t\tstate.items = []\n// \t\tstate.status = 'loading';\n// \t},\n// \t[fetchPizzas.fulfilled]:(state,action)=>{\n// \t\tstate.items = action.payload;\n// \t\tstate.status = 'success';\n// \t},\n// \t[fetchPizzas.rejected]:(state,action)=>{\n// \t\tstate.items = []\n// \t\tstate.status = 'error';\n// \t}\n// }","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","fetchPizzas","params","sortBy","order","category","search","pageCount","get","data","Status","initialState","items","status","LOADING","pizzaSlice","name","reducers","setItems","state","action","payload","extraReducers","builder","addCase","pending","fulfilled","SUCCESS","rejected","ERROR","selectPizzaData","actions","reducer"],"sources":["C:/Users/DimaP/Desktop/Проекты/React_handmade/mypizza/src/redux/slice/pizzaSlice.ts"],"sourcesContent":["import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport { RootState } from '../store';\r\n\r\nexport const fetchPizzas = createAsyncThunk<Pizza[], Record<string, string>>(\r\n\t'pizza/fetchPizzasStatus',\r\n\tasync (params) => {\r\n\t\tconst { sortBy, order, category, search, pageCount } = params;\r\n\t\tconst { data } = await axios.get<Pizza[]>(\r\n\t\t\t`http://localhost:3002/pizzas?_page=${pageCount}&_limit=4${category}&_sort=${sortBy}&_order=${order}${search}`,\r\n\t\t);\r\n\t\treturn data;\r\n\t},\r\n);\r\n\r\ntype Pizza = {\r\n\tid: string;\r\n\timageUrl: string;\r\n\ttitle: string;\r\n\ttypes: number[];\r\n\tsizes: number[];\r\n\tprice: number;\r\n};\r\n\r\nexport enum Status {\r\n\tLOADING = 'loading',\r\n\tSUCCESS = 'success',\r\n\tERROR = 'error',\r\n}\r\n\r\ninterface PizzasSliceState {\r\n\titems: Pizza[];\r\n\tstatus: Status;\r\n}\r\n\r\nconst initialState: PizzasSliceState = {\r\n\titems: [],\r\n\tstatus: Status.LOADING,\r\n};\r\n\r\nconst pizzaSlice = createSlice({\r\n\tname: 'pizza',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tsetItems(state, action: PayloadAction<Pizza[]>) {\r\n\t\t\tstate.items = action.payload;\r\n\t\t},\r\n\t},\r\n\r\n\textraReducers: (builder) => {\r\n\t\tbuilder.addCase(fetchPizzas.pending, (state, action) => {\r\n\t\t\tstate.items = [];\r\n\t\t\tstate.status = Status.LOADING;\r\n\t\t});\r\n\t\tbuilder.addCase(fetchPizzas.fulfilled, (state, action) => {\r\n\t\t\tstate.items = action.payload;\r\n\t\t\tstate.status = Status.SUCCESS;\r\n\t\t});\r\n\t\tbuilder.addCase(fetchPizzas.rejected, (state, action) => {\r\n\t\t\tstate.items = [];\r\n\t\t\tstate.status = Status.ERROR;\r\n\t\t});\r\n\t},\r\n\t\r\n});\r\nexport const selectPizzaData = (state: RootState) => state.pizzaSlice;\r\nexport const { setItems } = pizzaSlice.actions;\r\nexport default pizzaSlice.reducer;\r\n\r\n\r\n\r\n// extraReducers: {\r\n\t// \t[fetchPizzas.pending]:(state)=>{\r\n\t// \t\tstate.items = []\r\n\t// \t\tstate.status = 'loading';\r\n\t// \t},\r\n\t// \t[fetchPizzas.fulfilled]:(state,action)=>{\r\n\t// \t\tstate.items = action.payload;\r\n\t// \t\tstate.status = 'success';\r\n\t// \t},\r\n\t// \t[fetchPizzas.rejected]:(state,action)=>{\r\n\t// \t\tstate.items = []\r\n\t// \t\tstate.status = 'error';\r\n\t// \t}\r\n\t// }"],"mappings":"4WAAA,OAASA,gBAAgB,CAAEC,WAAW,KAAuB,kBAAkB,CAC/E,MAAOC,MAAK,KAAM,OAAO,CAGzB,MAAO,IAAMC,YAAW,CAAGH,gBAAgB,CAC1C,yBAAyB,4FACzB,iBAAOI,MAAM,oLACJC,MAAM,CAAyCD,MAAM,CAArDC,MAAM,CAAEC,KAAK,CAAkCF,MAAM,CAA7CE,KAAK,CAAEC,QAAQ,CAAwBH,MAAM,CAAtCG,QAAQ,CAAEC,MAAM,CAAgBJ,MAAM,CAA5BI,MAAM,CAAEC,SAAS,CAAKL,MAAM,CAApBK,SAAS,uBAC3BP,MAAK,CAACQ,GAAG,8CACOD,SAAS,qBAAYF,QAAQ,mBAAUF,MAAM,oBAAWC,KAAK,SAAGE,MAAM,EAC5G,uCAFOG,IAAI,kBAAJA,IAAI,iCAGLA,IAAI,uDACX,+DACD,CAWD,UAAYC,OAAM,CAIjB,UAJWA,MAAM,EAANA,MAAM,sBAANA,MAAM,sBAANA,MAAM,qBAANA,MAAM,GAANA,MAAM,MAWlB,GAAMC,aAA8B,CAAG,CACtCC,KAAK,CAAE,EAAE,CACTC,MAAM,CAAEH,MAAM,CAACI,OAChB,CAAC,CAED,GAAMC,WAAU,CAAGhB,WAAW,CAAC,CAC9BiB,IAAI,CAAE,OAAO,CACbL,YAAY,CAAZA,YAAY,CACZM,QAAQ,CAAE,CACTC,QAAQ,mBAACC,KAAK,CAAEC,MAA8B,CAAE,CAC/CD,KAAK,CAACP,KAAK,CAAGQ,MAAM,CAACC,OAAO,CAC7B,CACD,CAAC,CAEDC,aAAa,CAAE,uBAACC,OAAO,CAAK,CAC3BA,OAAO,CAACC,OAAO,CAACvB,WAAW,CAACwB,OAAO,CAAE,SAACN,KAAK,CAAEC,MAAM,CAAK,CACvDD,KAAK,CAACP,KAAK,CAAG,EAAE,CAChBO,KAAK,CAACN,MAAM,CAAGH,MAAM,CAACI,OAAO,CAC9B,CAAC,CAAC,CACFS,OAAO,CAACC,OAAO,CAACvB,WAAW,CAACyB,SAAS,CAAE,SAACP,KAAK,CAAEC,MAAM,CAAK,CACzDD,KAAK,CAACP,KAAK,CAAGQ,MAAM,CAACC,OAAO,CAC5BF,KAAK,CAACN,MAAM,CAAGH,MAAM,CAACiB,OAAO,CAC9B,CAAC,CAAC,CACFJ,OAAO,CAACC,OAAO,CAACvB,WAAW,CAAC2B,QAAQ,CAAE,SAACT,KAAK,CAAEC,MAAM,CAAK,CACxDD,KAAK,CAACP,KAAK,CAAG,EAAE,CAChBO,KAAK,CAACN,MAAM,CAAGH,MAAM,CAACmB,KAAK,CAC5B,CAAC,CAAC,CACH,CAED,CAAC,CAAC,CACF,MAAO,IAAMC,gBAAe,CAAG,QAAlBA,gBAAe,CAAIX,KAAgB,QAAKA,MAAK,CAACJ,UAAU,GAC9D,GAAQG,SAAQ,CAAKH,UAAU,CAACgB,OAAO,CAA/Bb,QAAQ,CAAwB,iBAC/C,cAAeH,WAAU,CAACiB,OAAO,CAIjC;AACC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}